:root{
  --bg:#eef7ff;
  --card:#ffffff;
  --ink:#1b2a3a;
  --muted:#6b7a8c;
  --accent:#3aa0ff;
  --accent-2:#6dd3b5;
  --danger:#ff6b6b;
  --line:#bbcedd;
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
  color:var(--ink);
  background: radial-gradient(1200px 600px at 20% 10%, #f6fbff, #e8f3ff) no-repeat,
              linear-gradient(#eef6ff,#ecf5ff);
}

/* toolbar */
.topbar{
  position:fixed; inset:0 0 auto 0; height:56px;
  display:flex; align-items:center; gap:12px; padding:8px 12px;
  background:#131a22; color:#fff; z-index:20;
}
.brand{font-weight:700}
.tools{display:flex; gap:8px; flex-wrap:wrap}
.tools button{
  background:#2a3644; color:#fff; border:none; border-radius:8px;
  padding:6px 10px; cursor:pointer
}
.tools button:hover{background:#334253}
.tools .danger{background:#8e1f1f}
.tools .danger:hover{background:#a12525}

/* stage */
#stage{
  position:fixed; inset:56px 0 0 0;
}

/* overlay (welcome + popup) */
.overlay{
  position:fixed; inset:0; display:flex; align-items:center; justify-content:center;
  background:rgba(0,0,0,.35); z-index:30;
}
.hidden{display:none}
.card{
  background:var(--card); border-radius:16px; padding:18px; width:min(92vw,480px);
  box-shadow: 0 10px 30px rgba(0,0,0,.12), 0 2px 6px rgba(0,0,0,.08);
}
.card h2,.card h3{margin:.2rem 0 1rem}
.card input, .card select{
  width:100%; padding:10px 12px; border-radius:10px; border:1px solid #d8e3ef;
  outline:none;
}
.row{display:flex; gap:10px; align-items:center; margin-top:10px}
.row.end{justify-content:flex-end}
.grid{
  display:grid; grid-template-columns:140px 1fr; gap:8px 12px; align-items:center;
  margin-bottom:10px;
}
.btnset{display:flex; gap:8px}
.btnset.wrap{flex-wrap:wrap}
.btnset button{
  border:none; border-radius:999px; padding:6px 12px; cursor:pointer;
  background:#f1f6fb; color:var(--ink);
}
.btnset button.active{background:var(--accent); color:#fff}
.primary{background:var(--accent); color:#fff}
.primary:hover{filter:brightness(1.05)}
.dead-only{display:none}
.btnset .toggle.alive.active{background:var(--accent-2); color:#063}

/* nodes & links */
.link{
  fill:none; stroke:var(--line); stroke-width:2px;
}

.group{
  filter: drop-shadow(0 6px 12px rgba(0,0,0,.12));
}
.group .frame{
  fill:#f9fdff; stroke:#d9e6f5; stroke-width:1.5;
  rx:14; ry:14;
}
.group.modern .frame{
  fill:#f1f7ff; stroke:#bcdcff;
}
.person{
  cursor:pointer;
}
.person rect{
  rx:12; ry:12; stroke:#bcd1e3; stroke-width:1.5; fill:#fff;
}
.person.modern rect{
  stroke:#7ab8ff; fill:#eaf4ff;
}
.person .name{font-weight:700; font-size:14px}
.person .dates{fill:var(--muted); font-size:11px}
.actions{display:flex; gap:8px; margin-top:6px}
.icon{
  font-size:12px; background:#eef4fb; padding:4px 6px; border-radius:8px;
  user-select:none
}
.icon:hover{filter:brightness(0.95)}
.icon.danger{background:#ffe6e6; color:#a11}

/* helper */
.hidden-soft{opacity:.2; pointer-events:none}
